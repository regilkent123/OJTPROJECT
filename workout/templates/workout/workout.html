{% extends 'base.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static "workout/stylesheets/asd.css" %}" />
<div class="navbar">
    <ul>
        <li><a href="{% url 'user:home' %}">Home</a></li>
        <li><a class="active" href="{% url 'user:workout' %}">Workout</a></li>
        <li><a class="user"><img src="{% static "workout/images/user.png" %}" id="user"></a></li>
        <li style="float:right"><a href="">Logout</a></li>
    </ul>
</div>
<div class = "content">
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p><h1>PROFILE PAGE</h1></p>
            <img src="{% static "workout/images/pewds.jpg" %}" id="user">
        </div>
    </div>
    <div id="layout" class = "layout">
        <div class="header">
            <form action="{% url 'user:createworkout' %}">
            <button id="createworkout" style="float:right">CREATE WORKOUT</button>
            </form>
        </div>
        <div class="content-layout">
            <div class="workout" v-for="workout in workouts">
                <a v-bind:href="workout.workout_photo"><img v-bind:src="workout.workout_photo"></a>
                <p>Workout Name: <a v-bind:href="workout.id">[[workout.workout_name]]</a></p>
                <p>Workout Type: [[workout.workout_type]]</p>
                <p>Description: [[workout.description]]</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        var app = new Vue({
            el: '.content-layout',
            delimiters: ["[[","]]"],
            data: function(){
                return{
                    workouts:[],
                    currentworkout:{},
                }
            },
            mounted: function(){
                this.getWorkouts();
            },
            methods: {
                getWorkouts: function(e){
                    var resource = this.$resource('/api/workout/');
                    resource.get()
                        .then((response)=> {
                            this.workouts = response.data;
                        }).catch((error) => {
                            console.log('ERROR')
                        });
                }
            }
        })
    </script>
    <script>

var modal = document.getElementById('myModal');

var btn = document.getElementById("user");

var span = document.getElementsByClassName("close")[0];

var content = document.getElementById("layout");

 
btn.onclick = function() {
    modal.style.display = "block";
    content.style.display = "none";
}


span.onclick = function() {
    modal.style.display = "none";
    content.style.display = "block";
}


window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
        content.style.display = "block";
    }
}
</script>
{% endblock %}